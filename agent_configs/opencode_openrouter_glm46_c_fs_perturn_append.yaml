completion:
  primary: hybrid
  provider_signals: true
  text_sentinels:
  - TASK COMPLETE
  tool_finish: mark_task_complete
enhanced_tools:
  enabled: true
  validation:
    enabled: true
    rule_config:
      one_bash_per_turn:
        turn_window_seconds: 120
    rules:
    - one_bash_per_turn
extends: opencode_grok4fast_c_fs_v2.yaml
features:
  plan: true
profile:
  name: opencode-openrouter-glm46-c-fs-perturn-append
prompts:
  task_prompt: 'You are an autonomous agent. Follow this plan:

    1. List the top-level directories and files (depth=2) using a single `find` or
    `ls` command.

    2. Highlight important C/C++ headers/sources and any build/test entry points.

    3. Summarise in 2-3 bullet points.

    4. On the final turn call `mark_task_complete()` and stop.

    '
  tool_prompt_mode: system_compiled_and_persistent_per_turn
  tool_prompt_synthesis:
    detail:
      per_turn: short
      system: full
    dialects:
      opencode_patch:
        per_turn_short: implementations/tool_prompt_synthesis/opencode_patch/per_turn_short.j2.md
        system_full: implementations/tool_prompt_synthesis/opencode_patch/system_full.j2.md
      pythonic_plan:
        per_turn_short: implementations/tool_prompt_synthesis/pythonic/per_turn_plan_strict.j2.md
        system_full: implementations/tool_prompt_synthesis/pythonic/system_plan_strict.j2.md
    enabled: true
    selection:
      by_mode:
        build: opencode_patch
        plan: pythonic_plan
provider_tools:
  suppress_prompts: false
  use_native: true
providers:
  default_model: openrouter/z-ai/glm-4.6
  models:
  - adapter: openai
    id: openrouter/z-ai/glm-4.6
    params:
      temperature: 0.2
      top_p: 0.9
    routing:
      fallback_models:
      - openai/gpt-4o-mini
